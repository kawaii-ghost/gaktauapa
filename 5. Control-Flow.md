# Alur Program

Kita akan belajar bagaimana alur program bekerja seperti percabangan, perulangan, serta fungsi bekerja.

## Percabangan
Ada sebuah register khusus `RIP` yang berfungsi sebagai _Instruction Pointer_.

Register tersebut memuat nilai alamat instruksi yang akan dijalankan nantinya.

CPU berpatokan pada `RIP` untuk mengetahui alamat yang akan dieksekusinya.

```asm
main:
        xor edi, edi    ; rip
        xor esi, esi    ; rip + 1
        call kill       ; rip + 2
```

Ada dua jenis percabangan, _unconditional jump_ dan _conditional jump_.


### Unconditional jump

Pertama, kita akan mengenal instruksi `jmp`.

Kalian tahu `goto`?. Yap, Instruksi `jmp` bekerja seperti keyword `goto` dalam bahasa C/C++.

Contohnya

```c
_start:
        goto end
end:
        exit(0);
```

Di dalam bahasa assembly

```asm
_start:
        jmp end
end:
        xor edi, edi
        call exit
```

Karena `jmp` tidak membutuhkan informasi apapun tentang suatu kondisi maka `jmp` juga digunakan untuk seluruh percabangan yang tidak  melakukan perbandingan atau selalu benar,

`jmp label` akan memuat alamat `label` ke dalam `rip` sehingga CPU akan mengeksekusi instruksi di alamat *label* yang ditunjuk oleh `rip`. 

Contohnya `if (1)`. Dalam hal tersebut, Compiler langsung menghasilkan `jmp` (atau tidak sama sekali) dikarenakan tidak ada perbandingan yang perlu dilakukan.

### Conditional jump

Conditional jump berjalan apabila suatu kondisi terpenuhi. Dalam kasus ini, conditional jump akan melakukan melihat informasi kondisi di _Register Flag_. 
Register Flag adalah register yang menyimpan informasi hasil dari komparasi.

Ada 3 Register Flags yang biasanya dipakai, _Sign Flag_, _Zero Flag_, dan _Carry Flag_.


- _Sign Flag_ (**SF**) adalah flag yang berisi status perlakuan kedua operan sebagai `signed` atau `unsigned`. 
- _Zero Flag_ adalah flag yang berisi status hasil komparasi.
- _Carry Flag_ adalah flag yang berfungsi untuk memberi tahu jika hasil komparasi terjadi overflow pada operasi unsigned.

Informasi-informasi di dalam `rflags` dibuat setelah melakukan komparasi melalui instruksi `cmp` atau `test`.

TODO OR NOT : Implement this freakin OVERFLOW https://teaching.idallen.com/dat2343/10f/notes/040_overflow.txt
